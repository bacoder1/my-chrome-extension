@import "./header.css";
@import "./widgets/homework.css";
@import "./widgets/info.css";
@import "./widgets/other.css";
@import "./widgets/resources.css";
@import "./widgets/timetable.css";

:root {
	/* font sizes */
	--text-xxs: 1rem;
	--text-xs: 1.125rem;
	--text-sm: 1.21rem;
	--text-base: 1.25rem;
	--text-md: 1.3125rem;
	--text-lg: 1.4rem;
	--text-xl: 1.5rem;

	/* colors */
	--white: 255, 255, 255;
	--primary-blue: 14, 124, 203;
	--dark-blue: 10, 87, 143;
	--marine-blue: 0, 106, 144;
	--gray: 148, 148, 148;
	--light-gray: 165, 165, 165;
	--primary-green: 60, 144, 0;
	--primary-orange: 209, 136, 0;
	--black: 0, 0, 0;

	--anim-wobble: wobble 0.25s ease-in-out infinite alternate;
}

:root:has(body.dark) {
	/* colors */
	--white: 0, 0, 0;
	--primary-blue: 14, 124, 203;
	--dark-blue: 10, 87, 143;
	--marine-blue: 0, 106, 144;
	--gray: 148, 148, 148;
	--light-gray: 165, 165, 165;
	--primary-green: 60, 144, 0;
	--primary-orange: 209, 136, 0;
	--black: 255, 255, 255;
}

/* Define the wobble animation */
@keyframes wobble {
	0% {
		transform: rotate(-1deg);
	}
	50% {
		transform: rotate(1deg);
	}
	100% {
		transform: rotate(-1deg);
	}
}

body {
	font-family: "FixelVariable", sans-serif !important;
	line-height: 1.2 !important;
	font-weight: 500 !important;
}

.dotty {
	background-color: rgba(var(--accent-color-primary), 0.02) !important;
	background-image: url("./assets/star-pattern.png") !important;
	background-size: 112.5% !important;
	background-repeat: repeat !important;
	background-position: left top !important;
	padding: 3.56rem 3rem !important;

	> .widgets-global-container {
		gap: 0 3rem !important;
	}
}

#GInterface_T {
	max-height: none !important;
}

/* widget */

.widget {
	position: relative !important;
	box-shadow: none !important;
	background: none !important;
	animation: appear 600ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
	transition: transform 200ms cubic-bezier(0.25, 1, 0.5, 1);
}

@keyframes appear {
	from {
		transform: translateY(
			15.625rem
		); /* 250px based on a 200px element height */
		opacity: 0;
	}

	40% {
		transform: translateY(-0.9375rem); /* -15px */
	}

	70% {
		transform: translateY(0.3125rem); /* 5px */
		opacity: 1;
	}

	to {
		transform: translateY(0); /* Resting position */
	}
}

.widget:has(header:focus) {
	transform: scale(0.8);
}

.widget:has(.no-events) {
	display: none !important;
}

.widget.travailafaire .piece-jointe a,
.widget.ressourcepedagogique .pj-date-contain a {
	display: 0.28rem 0.56rem !important;
	border-radius: 0.5rem !important;
	background-color: rgba(var(--dark-blue), 0.15) !important;
	color: #5e5e5e !important;
	transition-duration: 0.2s !important;
	transition-timing-function: ease-out !important;

	&:hover {
		background-color: rgba(var(--dark-blue), 0.3) !important;
	}
}

.widget.wobbling {
	animation: var(--anim-wobble);
}

.widget header {
	position: static !important;
	padding: 0.8rem 0 1.21rem 0 !important;
	user-select: none;

	&::after {
		content: "";
		height: calc(100% - 3.64rem);
		width: 100%;
		left: 0;
		position: absolute;
		border-radius: 1.125rem;
		top: 3.64rem;
		box-shadow: 0.05rem 0.05rem 0.2rem 0.2rem rgba(var(--gray), 0.1);
		background: rgba(var(--white), 1);
	}

	h2 {
		margin-left: 0 !important;
		margin-right: 0 !important;
		font-size: var(--text-md) !important;
		color: rgba(var(--black), 0.15) !important;
		text-overflow: ellipsis !important;
		overflow: hidden;
		letter-spacing: 1px;
		text-transform: uppercase;
		font-weight: 600 !important;
		transition: color 0.2s ease-out;
		margin: 0 !important;

		cursor: pointer;
		text-align: start !important;

		* {
			color: inherit !important;
			text-align: inherit !important;
		}

		&:hover {
			color: rgba(var(--black), 0.3) !important;
		}
	}
}

div.cta-conteneur {
	top: 1.4rem !important;
	right: 0 !important;
	transform: translateY(-50%);

	> i.icon {
		background-color: rgba(var(--light-gray), 0.1) !important;
		width: auto !important;
		height: auto !important;
		min-height: auto !important;
		border: none !important;
		color: rgba(94, 94, 94, 0.6) !important;
		padding: 0.5rem 0.85rem !important;
		border-radius: 9999px !important;
		transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out !important;

		&:hover {
			background-color: rgba(var(--light-gray), 0.25) !important;
			color: rgba(94, 94, 94, 0.8) !important;
		}

		svg {
			height: 1.6rem !important;
			width: 1.6rem !important;
			stroke-width: 3px !important;
		}

		&::before {
			font-family: "FixelVariable", sans-serif !important;
			font-weight: 600 !important;
			line-height: 1 !important;
			content: "Voir tout" !important;
			font-size: var(--text-md) !important;
			margin-right: 0.375rem !important;
		}
	}
}

/* .widget.edt .trait-matiere,
.widget.travailafaire .with-color::before {
	background-color: rgba(var(--subject-color), 1) !important;
} */

.ds,
.notes {
	--widget-color: 209, 136, 0;
}

.agenda {
	--widget-color: var(--primary-green);
}

.viescolaire {
	--widget-color: var(--marine-blue);
}

.widget {
	&.agenda {
		.infos-agenda-conteneur span {
			color: rgba(var(--black), 0.5) !important;
		}
	}

	&.notes {
		.as-info {
			padding: 0.5rem 0.84rem !important;
			border-radius: 0.5rem !important;
			flex-direction: row !important;
			gap: 2px !important;
			align-self: auto !important;
			background-color: rgba(var(--widget-color), 0.2) !important;
			color: rgba(var(--widget-color), 1);

			div {
				display: inline-block;
			}
		}

		.infos-conteneur .date {
			color: rgba(var(--black), 0.5) !important;
			margin-top: 0.5rem !important;
		}
	}

	&.viescolaire {
		.wrap .date {
			color: rgba(var(--black), 0.5) !important;
			padding-top: 0.5rem !important;
		}
	}

	&.ds {
		.wrap {
			align-items: center !important;
		}

		.infos-ds-conteneur span {
			color: rgba(var(--black), 0.5) !important;
		}
	}

	&.competences {
		.infos-conteneur .date {
			color: rgba(var(--black), 0.5) !important;
			margin-top: 0.5rem !important;
		}
	}
}
/* ds, agenda, vie sco */

.widget.ds,
.widget.agenda,
.widget.viescolaire,
.widget.notes,
.widget.competences {
	ul {
		overflow: hidden;

		li {
			border-color: rgba(var(--black), 0.05) !important;
			padding: 1.125rem 1.5rem !important;
			transition: background-color 0.05s ease-out !important;

			.wrap > div:first-child {
				padding: 0.5rem 0.84rem !important;
				border-radius: 0.5rem !important;
				flex-direction: row !important;
				gap: 2px !important;
				align-self: auto !important;
				background-color: rgba(var(--widget-color), 0.2) !important;
				color: rgba(var(--widget-color), 1);
				width: auto !important;

				div {
					display: inline-block;
				}
			}

			&:hover {
				background-color: rgba(var(--widget-color), 0.1) !important;
			}

			a {
				height: 100%;
				margin: 0 !important;
				padding: 0 !important;
				align-items: center !important;

				&:hover {
					background-color: transparent !important;
				}
			}

			&.masked {
				display: none !important;
			}
		}
	}

	.as-footer {
		display: none !important;
	}

	ul.liste-clickable {
		margin: 0 !important;
		padding: 0 !important;
	}

	.content-container::after {
		color: rgba(var(--widget-color), 0.05) !important;
	}
}

.widget ul.liste-clickable {
	border: 1px solid rgba(var(--black), 0.05) !important;
	border-radius: 1.125rem;
}
